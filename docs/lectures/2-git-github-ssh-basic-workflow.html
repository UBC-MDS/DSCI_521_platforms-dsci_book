<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.1">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Introduction to version control with Git and GitHub – DSCI 521: Computing Platforms for Data Science</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">DSCI 521: Computing Platforms for Data Science</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../lectures/2-git-github-ssh-basic-workflow.html">Lecture 2: Introduction to version control with Git and GitHub</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lectures/0-jupyterlab-orientation-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 0: JupyterLab Orientation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lectures/1-MDStools-bash-filesystem.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 1: Introduction to MDS software and Bash</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lectures/2-git-github-ssh-basic-workflow.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Lecture 2: Introduction to version control with Git and GitHub</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lectures/3-git-history-merge-conflicts-stash.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 3: Getting grovy with Git and GitHub</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lectures/4-quarto_github_pages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 4: Introduction to Quarto and Github Pages</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lectures/5-rstudio-projects-notebooks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 5: Dynamic documents: from markdown to Rmarkdown documents</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lectures/6-rmarkdown-quarto-slides-ghpages.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 6: Quarto, RMarkdown, and Jupyter Slides</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lectures/7-virtual-environments.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 7: Virtual environments</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../lectures/8-regex-filenames-project-organization.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Lecture 8: Organization of Data Science projects and some useful tools</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#lecture-objectives" id="toc-lecture-objectives" class="nav-link active" data-scroll-target="#lecture-objectives">Lecture objectives</a></li>
  <li><a href="#why-version-control" id="toc-why-version-control" class="nav-link" data-scroll-target="#why-version-control">Why version control?</a></li>
  <li><a href="#set-up-keys-for-ssh-for-use-with-github" id="toc-set-up-keys-for-ssh-for-use-with-github" class="nav-link" data-scroll-target="#set-up-keys-for-ssh-for-use-with-github">Set up keys for SSH for use with GitHub</a>
  <ul class="collapse">
  <li><a href="#remotely-accessing-another-computer-using-ssh" id="toc-remotely-accessing-another-computer-using-ssh" class="nav-link" data-scroll-target="#remotely-accessing-another-computer-using-ssh">Remotely accessing another computer using SSH</a>
  <ul class="collapse">
  <li><a href="#definitions" id="toc-definitions" class="nav-link" data-scroll-target="#definitions">Definitions</a></li>
  </ul></li>
  <li><a href="#review---password-based-authentication" id="toc-review---password-based-authentication" class="nav-link" data-scroll-target="#review---password-based-authentication">Review - password-based authentication</a></li>
  <li><a href="#ssh-key-based-authentication" id="toc-ssh-key-based-authentication" class="nav-link" data-scroll-target="#ssh-key-based-authentication">SSH key-based authentication</a></li>
  <li><a href="#understanding-public-key-private-key-concepts" id="toc-understanding-public-key-private-key-concepts" class="nav-link" data-scroll-target="#understanding-public-key-private-key-concepts">Understanding public key private key concepts</a></li>
  <li><a href="#you-can-put-your-lock-at-many-places" id="toc-you-can-put-your-lock-at-many-places" class="nav-link" data-scroll-target="#you-can-put-your-lock-at-many-places">You can put your lock at many places</a></li>
  <li><a href="#how-the-lock-works" id="toc-how-the-lock-works" class="nav-link" data-scroll-target="#how-the-lock-works">How the lock works</a></li>
  <li><a href="#why-ssh-keys-over-passwords" id="toc-why-ssh-keys-over-passwords" class="nav-link" data-scroll-target="#why-ssh-keys-over-passwords">Why SSH keys over passwords</a></li>
  <li><a href="#keeping-your-private-key-safe" id="toc-keeping-your-private-key-safe" class="nav-link" data-scroll-target="#keeping-your-private-key-safe">Keeping your private key safe</a></li>
  </ul></li>
  <li><a href="#different-type-of-keys" id="toc-different-type-of-keys" class="nav-link" data-scroll-target="#different-type-of-keys">Different type of keys</a>
  <ul class="collapse">
  <li><a href="#authentication-vs.-encryption" id="toc-authentication-vs.-encryption" class="nav-link" data-scroll-target="#authentication-vs.-encryption">Authentication vs.&nbsp;encryption</a></li>
  <li><a href="#cloning-repositories-from-github" id="toc-cloning-repositories-from-github" class="nav-link" data-scroll-target="#cloning-repositories-from-github">Cloning repositories from GitHub</a></li>
  <li><a href="#creating-a-repository-from-github-method-1-above" id="toc-creating-a-repository-from-github-method-1-above" class="nav-link" data-scroll-target="#creating-a-repository-from-github-method-1-above">Creating a repository from GitHub (method 1 above)</a>
  <ul class="collapse">
  <li><a href="#steps-to-follow" id="toc-steps-to-follow" class="nav-link" data-scroll-target="#steps-to-follow">Steps to follow:</a></li>
  </ul></li>
  <li><a href="#what-is-a-git-repository" id="toc-what-is-a-git-repository" class="nav-link" data-scroll-target="#what-is-a-git-repository">What is a Git repository?</a></li>
  <li><a href="#adding-committing-changes-to-version-controlled-files" id="toc-adding-committing-changes-to-version-controlled-files" class="nav-link" data-scroll-target="#adding-committing-changes-to-version-controlled-files">Adding &amp; committing changes to version controlled files</a>
  <ul class="collapse">
  <li><a href="#steps-to-follow-1" id="toc-steps-to-follow-1" class="nav-link" data-scroll-target="#steps-to-follow-1">Steps to follow:</a></li>
  </ul></li>
  <li><a href="#changing-and-saving-version-controlled-files" id="toc-changing-and-saving-version-controlled-files" class="nav-link" data-scroll-target="#changing-and-saving-version-controlled-files">Changing and saving version controlled files</a>
  <ul class="collapse">
  <li><a href="#what-is-the-staging-area-and-why-is-it-there" id="toc-what-is-the-staging-area-and-why-is-it-there" class="nav-link" data-scroll-target="#what-is-the-staging-area-and-why-is-it-there">What is the staging area, and why is it there?</a></li>
  </ul></li>
  <li><a href="#commit-your-files" id="toc-commit-your-files" class="nav-link" data-scroll-target="#commit-your-files">Commit your files</a></li>
  <li><a href="#push-local-changes-to-github" id="toc-push-local-changes-to-github" class="nav-link" data-scroll-target="#push-local-changes-to-github">Push local changes to GitHub</a></li>
  <li><a href="#pull-your-changes-from-a-remote-repository" id="toc-pull-your-changes-from-a-remote-repository" class="nav-link" data-scroll-target="#pull-your-changes-from-a-remote-repository">Pull your changes from a remote repository</a></li>
  <li><a href="#attribution" id="toc-attribution" class="nav-link" data-scroll-target="#attribution">Attribution</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Introduction to version control with Git and GitHub</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="lecture-objectives" class="level2">
<h2 class="anchored" data-anchor-id="lecture-objectives">Lecture objectives</h2>
<ol type="1">
<li>Implement SSH authentication</li>
<li>Differentiate between the use of GitHub as a remote hosting service for version control and Git as a version control system.</li>
<li>Create a Git repository.</li>
<li>Implement Git’s clone, add, status, commit, pull, and push operations on the command line and their equivalent use in VS Code.</li>
<li>Understand what implies using the staging area in a Git workflow.</li>
<li>Recognize the commit as the primary building block for storing a project version characterized by an attached message and a hash that serves as a unique identifier.</li>
</ol>
</section>
<section id="why-version-control" class="level2">
<h2 class="anchored" data-anchor-id="why-version-control">Why version control?</h2>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/phd101212s.png" class="img-fluid figure-img"></p>
<figcaption>alt tag</figcaption>
</figure>
</div>
<p><em>source: “Piled Higher and Deeper” by Jorge Cham, http://www.phdcomics.com</em></p>
<p>To <strong>version control</strong> a project, you generally need two things: (1) a version control system and (2) a repository hosting service.</p>
<p>The version control system is the software responsible for tracking changes, sharing changes you make with others, obtaining changes from others, and resolving conflicting edits. The repository hosting service is responsible for storing a copy of the version-controlled project online (a repository), where you and your collaborators can access it remotely, discuss issues and bugs, and distribute your final product. For both of these items, there is a wide variety of choices. In this textbook we’ll use Git for version control, and GitHub for repository hosting, because both are currently the most widely used platforms.</p>
<p>Technically you don’t have to use a repository hosting service. You can, for example, version control a project that is stored only in a folder on your computer—never sharing it on a repository hosting service. But using a repository hosting service provides a few big benefits, including managing collaborator access permissions, tools to discuss and track bugs, and the ability to have external collaborators contribute work, not to mention the safety of having your work backed up in the cloud. Since most repository hosting services now offer free accounts, there are not many situations in which you wouldn’t want to use one for your project.</p>
</section>
<section id="set-up-keys-for-ssh-for-use-with-github" class="level1">
<h1>Set up keys for SSH for use with GitHub</h1>
<section id="remotely-accessing-another-computer-using-ssh" class="level2">
<h2 class="anchored" data-anchor-id="remotely-accessing-another-computer-using-ssh">Remotely accessing another computer using SSH</h2>
<p>Let’s start with some definitions:</p>
<section id="definitions" class="level3">
<h3 class="anchored" data-anchor-id="definitions">Definitions</h3>
<p><strong>Secure SHell (SSH)</strong> - a common method for remote login to another computer which is secure.</p>
<p><strong>server</strong> - a machine you are SSHing into. The server sits and waits to be contacted.</p>
<p><strong>client</strong> - usually your machine. The client initiates contact with the server.</p>
</section>
</section>
<section id="review---password-based-authentication" class="level2">
<h2 class="anchored" data-anchor-id="review---password-based-authentication">Review - password-based authentication</h2>
<ul>
<li>Passwords are short and tend to be somewhat easy to “break” (guess).
<ul>
<li>Say your password contains 12 characters</li>
<li>each character is one of 26 uppercase letters, 26 lowercase letters, 10 digits, or ~10 special characters</li>
<li>total probably around ~70 possibilities per character, so <span class="math inline">\(70^{12}\approx 10^{22}\)</span></li>
<li>This is a HUGE number, except that there are patterns within passwords that make them easier to guess</li>
<li>More on security and privacy in future courses</li>
</ul></li>
</ul>
</section>
<section id="ssh-key-based-authentication" class="level2">
<h2 class="anchored" data-anchor-id="ssh-key-based-authentication">SSH key-based authentication</h2>
<p>Two components:</p>
<ol type="1">
<li>public key</li>
<li>private key</li>
</ol>
<p>These files have an asymmetrical relationship:</p>
<ul>
<li>the public key CANNOT decrypt messages generated by the private key</li>
<li>the private key CAN decrypt messages generated by the public key</li>
</ul>
</section>
<section id="understanding-public-key-private-key-concepts" class="level2">
<h2 class="anchored" data-anchor-id="understanding-public-key-private-key-concepts">Understanding public key private key concepts</h2>
<ul>
<li>Think of a public key, not as a key, but as a padlock that you can make copies of and put anywhere you want.</li>
<li>To put your ‘padlock’ on an another machine, you would copy it to <code>authorized_keys</code> in the <code>~/.ssh</code> folder.</li>
<li>Think of a private key as an actual key, it can open the padlock that is stored on the other machine.</li>
</ul>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/keys_1.png" class="img-fluid figure-img"></p>
<figcaption>alt tag</figcaption>
</figure>
</div>
<p><em>source: http://blakesmith.me/2010/02/08/understanding-public-key-private-key-concepts.html</em></p>
</section>
<section id="you-can-put-your-lock-at-many-places" class="level2">
<h2 class="anchored" data-anchor-id="you-can-put-your-lock-at-many-places">You can put your lock at many places</h2>
<p>As long as you are using the same lock (public key), you will be able to open it with the same private key.</p>
<p><img src="img/keys_2.png" class="img-fluid" alt="alt tag"> <em>source: http://blakesmith.me/2010/02/08/understanding-public-key-private-key-concepts.html</em></p>
</section>
<section id="how-the-lock-works" class="level2">
<h2 class="anchored" data-anchor-id="how-the-lock-works">How the lock works</h2>
<ul>
<li>Keys are generated using <code>ssh-keygen</code>, to make private key (usually called <code>id_rsa</code>) and a public key (usually called <code>id_rsa.pub</code>)</li>
<li>You can make copies of <code>id_rsa.pub</code> (public key/padlock) and distribute them to other machines</li>
<li>The other machine uses the public key to encrypt a challenge message to you</li>
<li>You need to show that you can decrypt the message to demonstrate that you are in possesion of the associated private key</li>
</ul>
</section>
<section id="why-ssh-keys-over-passwords" class="level2">
<h2 class="anchored" data-anchor-id="why-ssh-keys-over-passwords">Why SSH keys over passwords</h2>
<p>SSH keys use the <a href="https://en.wikipedia.org/wiki/RSA_(cryptosystem)">RSA cryptosystem</a></p>
<p>The private key is much longer than a password. A standard now is 4096-bit keys, which means <span class="math inline">\(&gt; 10^{1200}\)</span> possibilities. This makes it harder for a hacker to break (guess) the password. More on this when we discuss binary numbers next week.</p>
<p>Aside: Quantum computers will be able to break RSA encryption. It is very hard to predict whether this is years or decades away.</p>
</section>
<section id="keeping-your-private-key-safe" class="level2">
<h2 class="anchored" data-anchor-id="keeping-your-private-key-safe">Keeping your private key safe</h2>
<ul>
<li><code>ssh-keygen</code> allows you to put a password or passphrase on the private key</li>
<li>this should be shared with NO ONE!</li>
<li>if your private key does fall into the wrong hands, the person must still know the password or passphrase to use the private key</li>
</ul>
<p><img src="img/password_strength.png" class="img-fluid" alt="alt tag"> <em>source - https://xkcd.com/936/</em></p>
</section>
</section>
<section id="different-type-of-keys" class="level1">
<h1>Different type of keys</h1>
<p>There may be different methods of how to generate private-public key pairs.</p>
<p>The <a href="https://docs.github.com/en/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent">GitHub SSH key generation instructions</a> uses the <code>-t</code> flag to indicate the “type” of key to create, in thier instructions they use the <code>ed25519</code> algorithm to create private and public values.</p>
<p>The general premice to SSH keys is the same, there is a private key that stays on your machine and is never shared with other people, and the public key you can freely share that will be used to authenticate the machine with the private key on it.</p>
<section id="authentication-vs.-encryption" class="level3">
<h3 class="anchored" data-anchor-id="authentication-vs.-encryption">Authentication vs.&nbsp;encryption</h3>
<ul>
<li>The system described above is purely for <em>authentication</em>
<ul>
<li>the client needs to prove to the server that the client is authorized to access the server</li>
<li>Someone with authority has put the public key in <code>~/.ssh/authorized_keys</code> on the server</li>
<li>The server now grants access to anyone possessing a private key matching one of these public keys</li>
</ul></li>
<li>This is separate from <em>encryption</em> of the data flowing between the client and server.
<ul>
<li>This prevents eavesdroppers from listening to client-server communications</li>
</ul></li>
</ul>
</section>
<div class="activity">
<section id="lecture-2-activity-1" class="level2 activity-header">
<h2 class="anchored" data-anchor-id="lecture-2-activity-1">Lecture 2 Activity 1</h2>
</section>
<section id="creating-a-repository" class="level1 activity-container">
<h1>Creating a Repository</h1>
<p>We can create a repository one of two ways:</p>
<ol type="1">
<li>Start on GitHub and <strong>then</strong> clone the repository to your local computer using Git.</li>
<li>Start in a folder on your local computer, use Git to initialize it as a Git repository (by typing <code>git init</code> inside the directory). <strong>Then</strong> create a new repository on GitHub without adding any files. <strong>Then</strong> use Git to tell your local computer where the remote is (i.e., the location of the empty GitHub repository on GitHub).</li>
</ol>
<p>You can see the second method requires more work. So the first method is usually the most convenient and it is sufficient for you to only use this approach.</p>
</section>
</div>
<div class="exercise">
<section id="lecture-2-activity-1-1" class="level3 exercise-header">
<h3 class="anchored" data-anchor-id="lecture-2-activity-1-1">Lecture 2 Activity 1</h3>
</section>
<div class="exercise-container">
<p>Check that your cloned repo it is a Git repository. How can you check that you are working on a Git repository?</p>
<p>Is a repository the same as a directory? Can be a Git repository your current working directory?</p>
</div>
</div>
<section id="cloning-repositories-from-github" class="level2">
<h2 class="anchored" data-anchor-id="cloning-repositories-from-github">Cloning repositories from GitHub</h2>
<ul>
<li>If you only have minor edits to perform, you don’t need to clone and can edit files directly on GitHub via their online editor.</li>
<li>However, if you want to be able to run the code on your own machine, and modify it there, we need to “clone” the repository.</li>
<li>To clone it:
<ol type="1">
<li>go into the repository</li>
<li>click on the green “Clone or download” button (make sure the pop-up says “Clone with HTTPS”)
<ul>
<li>note - we will learn to use SSH authentication later…</li>
</ul></li>
<li>copy the URL to the clipboard</li>
<li>open Bash on your laptop</li>
<li>navigate to the directory you want to clone into by using the <code>cd</code> command.</li>
<li>type <code>git clone</code> followed by the URL, e.g.&nbsp;<code>git clone https://github.com/github_username/repository_name.git</code>, and press enter.</li>
<li>Once the download has finished you can use <code>cd</code> to navigate into the directory you just clones and <code>ls</code> to confirm that the content is the same as you saw online.</li>
</ol></li>
</ul>
<p>For more details, see Github’s docs on <a href="https://help.github.com/articles/cloning-a-repository/">cloning</a>.</p>
<p><strong>Be Careful</strong>: do not nest git repositoies. That is, there should not be one git repository inside another git repositoiry. Be careful that when you are using <code>git clone</code> (or <code>git init</code></p>
</section>
<section id="creating-a-repository-from-github-method-1-above" class="level2">
<h2 class="anchored" data-anchor-id="creating-a-repository-from-github-method-1-above">Creating a repository from GitHub (method 1 above)</h2>
<p>I recommend that you follow along with these steps on your own machine to practice the commands as you are reading about them. If it is sometimes unclear where to click or what the output should look like from a command, refer to the corresponding sections of the videos to see exactly what to do (The git workflow one and the ones from lecture 2). You can create however many repositories on GitHub that you would like and remove them after, so you don’t need to worry about experimenting and creating several new ones.</p>
<section id="steps-to-follow" class="level3">
<h3 class="anchored" data-anchor-id="steps-to-follow">Steps to follow:</h3>
<ol type="1">
<li><p>Go to https://github.ubc.ca and make sure you are logged in.</p></li>
<li><p>Click green “New repository” button. Or, if you are on your own profile page, click on “Repositories”, then click the green “New” button.</p></li>
<li><p>Enter a repository name</p>
<ul>
<li>Choose between a public or private repo.
<ul>
<li>If you choose public, anyone can see and clone you repo (but it is still only you that can push to it).</li>
</ul></li>
<li>Check “Initialize this repository with a README”
<ul>
<li>This makes it possible to clone the repo without adding a file manually later.</li>
</ul></li>
</ul></li>
<li><p>Click big green button “Create repository”.</p></li>
<li><p>That’s it! You now have a new repository on GitHub!</p></li>
</ol>
</section>
</section>
<section id="what-is-a-git-repository" class="level2">
<h2 class="anchored" data-anchor-id="what-is-a-git-repository">What is a Git repository?</h2>
<p>A Git repository stores all the necessary information for version control your project in a hidden folder called <code>.git</code>. If you want to know if you are working in a Git repo using the terminal you can use the bash command <code>ls -a</code> as you can see in the image. The <code>-a</code> flag will include into the lists of files displayed on the terminal the hidden folders. If <code>.git</code> is included you are working in a Git repository.</p>
<p>By cloning a repository from GitHub to your computer, you are automatically getting a copy of <code>.git</code> and thus, working on a Git.</p>
</section>
<section id="adding-committing-changes-to-version-controlled-files" class="level2">
<h2 class="anchored" data-anchor-id="adding-committing-changes-to-version-controlled-files">Adding &amp; committing changes to version controlled files</h2>
<p>There are two ways to make changes to your files in the remote repo on GitHub:</p>
<ol type="1">
<li>Edit files directly on Github via the web interface.
<ul>
<li>Note that there is no step for adding to the staging area on GitHub. This gives less flexibility, but is convenient when working via the web interface where you probably only are making small changes.</li>
</ul></li>
<li>Make changes on files you have cloned locally to your computer, <code>add</code> them to the staging area, <code>commit</code> and then <code>push</code> the changes up to Github.</li>
</ol>
<p>Let’s try out method 1 by editing the file called <code>README.md</code> that contains some basic information.</p>
<section id="steps-to-follow-1" class="level3">
<h3 class="anchored" data-anchor-id="steps-to-follow-1">Steps to follow:</h3>
<ol type="1">
<li><p>Click on the <code>README.md</code> file link in your repo on GitHub.</p></li>
<li><p>Click on the pen tool (right-hand side of document)</p></li>
<li><p>Add your name as the author to the document (e.g., “author: Roald Dahl”)</p></li>
<li><p>Provide a commit message (e.g.&nbsp;“Add author info”).</p></li>
<li><p>Click on the big green button “Commit changes” to save your work (this is essentially <code>git add</code> + <code>git commit</code> in one click).</p></li>
<li><p>Download this repo to your local computer by cloning it (<code>git clone</code> + the remote’s URL)</p></li>
</ol>
</section>
</section>
<section id="changing-and-saving-version-controlled-files" class="level2">
<h2 class="anchored" data-anchor-id="changing-and-saving-version-controlled-files">Changing and saving version controlled files</h2>
<ul>
<li><p>To make a change to a file inside a Git repository, edit it as you would with any other local file, e.g.&nbsp;<code>code name-of-file.txt</code>.</p></li>
<li><p>Once you have made changes to a file in a local Git repository (such as on your laptop), you need to tell Git that you want to record these changes in the version history.</p></li>
<li><p>This is a two step process where you first <strong>add</strong> the changes to the stanging area and then <strong>committ</strong> them, which saves the differences between the current and previous version of the file together with your message describing what you did.</p>
<ul>
<li>These changes are saved in the hidden <code>.git</code> directory in the Git repository.</li>
</ul></li>
<li><p>This is what it looks like when adding and committing:</p>
<ol type="1">
<li>Add changes to staging area</li>
</ol>
<p><code>git add file-name(s)</code></p>
<ol start="2" type="1">
<li>Commit the changes together with a descriptive message</li>
</ol>
<p><code>git commit -m "Clarify the README installation instructions"</code></p></li>
</ul>
<p>For more details, see Software Carpentry’s lesson on <a href="http://swcarpentry.github.io/git-novice/04-changes/">tracking local changes with Git</a>.</p>
<section id="what-is-the-staging-area-and-why-is-it-there" class="level3">
<h3 class="anchored" data-anchor-id="what-is-the-staging-area-and-why-is-it-there">What is the staging area, and why is it there?</h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="img/staging_area.png" class="img-fluid figure-img"></p>
<figcaption>alt tag</figcaption>
</figure>
</div>
<p>Once you reach a point that you want Git to keep a record of the current version of your work, you need to commit (i.e., snapshot) your changes. A prerequisite to this is telling Git which files should be included in that snapshot. We call this step adding the files to the <strong>staging area</strong>.</p>
<p>Note that the staging area is not a real physical location on your computer; it is instead a conceptual placeholder for these files until they are committed. The benefit of the Git version control system using a staging area is that you can choose to commit changes in only certain files. For example, we add only the two files that are important to the analysis project (<code>analysis.ipynb</code> and <code>README.md</code>) and not our personal scratch notes for the project (<code>notes.txt</code>).</p>
<p>The staging area allows more control over what you are about to commit, allowing you to commit parts of a file or multiple files together with a single descriptive message. To add parts of a file instead of everything type <code>git add -p</code> and then interactively choose which parts you want by typing either <code>n</code> (no) or <code>y</code> (yes) followed by pressing enter for each chunk of code. This workflow is great for reviewing the changes as you add them to the staging area, which ensures you don’t commit anything by mistake. Note that you must omit<code>-p</code> when adding new files, so you would type <code>git add &lt;filename&gt;</code>.</p>
<p><strong>Commands</strong></p>
<p>To add all updated, new, and deleted files in the git repo you can type <code>git add --all</code>. To only add all updated and new files in the git repo you can type <code>git add .</code>. To only add all updated and deleted files in the git repo you can type <code>git add -u</code>, this is very useful.</p>
<p>To see which files you have staged, before committing them, you can use <code>git status</code>. To see the exact changes you have staged instead of just the file names, use <code>git diff --staged</code>. Finally, if you change your mind and want to removea file from the staging area, you can type <code>git restore --staged name-of-your-file.txt</code></p>
</section>
</section>
<section id="commit-your-files" class="level2">
<h2 class="anchored" data-anchor-id="commit-your-files">Commit your files</h2>
<p>To include a description in your commit using the terminal, you should write the command <code>git commit</code> and press ENTER. After doing that, a file called <code>COMMIT_EDITMSG</code> will open in your editor. There you can write the title and body of the commit message that you want to associate with your changes.</p>
</section>
<section id="push-local-changes-to-github" class="level2">
<h2 class="anchored" data-anchor-id="push-local-changes-to-github">Push local changes to GitHub</h2>
<p>Once you have committed, you changes are saved locally on your laptop. To also upload them to GitHub, you need to “push” the changes to Github. Since you cloned an online repository at the beginning, git knowed that you want to push you changes to that location by default, and you can do so by typing <code>git push</code> without specifyin a URL.</p>
<p>For more details, see Github’s doc on <a href="https://help.github.com/articles/pushing-to-a-remote/">pushing changes to Github</a>.</p>
<p><strong>Always verify that your assignments were uploaded by viewing the online repo!</strong></p>
</section>
<section id="pull-your-changes-from-a-remote-repository" class="level2">
<h2 class="anchored" data-anchor-id="pull-your-changes-from-a-remote-repository">Pull your changes from a remote repository</h2>
<p>Changes pushed by collaborators, or created directly on GitHub will not be automatically sent to your local repository.</p>
<p>If you are working on a project with collaborators, they will also be making changes to files (e.g., to the analysis code in a Jupyter notebook and the project’s <code>README</code> file), committing them to their own local repository, and pushing their commits to the remote GitHub repository to share them with you. When they push their changes, those changes will only initially exist in the remote GitHub repository and not in your local repository.</p>
<p>To obtain the new changes from the remote repository on GitHub, you will need to pull those changes to your own local repository. By pulling changes, you synchronize your local repository to what is present on GitHub. Additionally, until you pull changes from the remote repository, you will not be able to push any more changes yourself (though you will still be able to work and make commits in your own local repository)</p>
<p>If you want to do this with the terminal, you have to pull from the terminal you should use the command <code>git pull</code>.</p>
<div class="exercise">
<section id="lecture-2-exercise-2" class="level3 exercise-header">
<h3 class="anchored" data-anchor-id="lecture-2-exercise-2">Lecture 2 Exercise 2</h3>
</section>
<div class="exercise-container">
<p>Let’s access your own GitHub home for MDS. There you can find the links for all the courses’ repositories, as well as, the labs’ repositories. Your home is located at:</p>
<p><code>https://github.ubc.ca/MDS-2021-22/yourCWL_home</code></p>
<p>where <code>yourCWL</code> should be replaced by your CWL.</p>
<p>(<strong>Hint:</strong> you might want to bookmark this page as it gives you easy access to all relevant courses’ repositories).</p>
</div>
</div>
<div class="exercise">
<section id="lecture-2-exercise-2-1" class="level3 exercise-header">
<h3 class="anchored" data-anchor-id="lecture-2-exercise-2-1">Lecture 2 Exercise 2</h3>
</section>
<div class="exercise-container">
<ul>
<li><a href="https://docs.github.com/en/github/creating-cloning-and-archiving-repositories/creating-a-new-repository">Create a new repository at GitHub.com</a> and choose to add a README file in this process.</li>
<li>Clone this repository (note that you will need to change your username on your computer if you use a different one than for GitHub.ubc.ca).</li>
<li>Make changes to the README.</li>
<li>Add and commit your changes</li>
<li>Create a new file, add and commit it</li>
<li>Push your previous changes to GitHub and confirm that they are there.</li>
</ul>
</div>
</div>
</section>
<section id="attribution" class="level2">
<h2 class="anchored" data-anchor-id="attribution">Attribution</h2>
<ol type="1">
<li><a href="http://happygitwithr.com/">Happy Git and GitHub for the useR by Jenny Bryan and the STAT 545 TAs</a></li>
<li><a href="https://software-carpentry.org/">Software Carpentry</a>, specifically the Unix Shell and Git lessons</li>
</ol>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>